# ===================================
# üìä WEEK 11: ANALYTICS & IMPACT TRACKING
# ===================================

# Google OAuth Configuration
# Get credentials at: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your_google_client_id_here.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
GOOGLE_REDIRECT_URI=https://ranksmart.vercel.app/api/analytics/gsc-callback

# Google Search Console API
# Enable at: https://console.cloud.google.com/apis/library/searchconsole.googleapis.com
# (Uses same OAuth credentials as above)

# ===================================
# SERP Position Tracking
# ===================================

# Option 1: SerpAPI (Recommended for production)
# Get API key at: https://serpapi.com/
# Free tier: 100 searches/month
# Paid: $50/month for 5,000 searches
SERPAPI_KEY=your_serpapi_key_here

# Option 2: Google Custom Search API (Free tier alternative)
# Get API key at: https://console.cloud.google.com/apis/credentials
# Create search engine at: https://programmablesearchengine.google.com/
# Free tier: 100 queries/day
GOOGLE_SEARCH_API_KEY=your_google_search_api_key_here
GOOGLE_SEARCH_ENGINE_ID=your_search_engine_id_here

# Option 3: Firecrawl SERP (If available)
# Uses existing FIRECRAWL_API_KEY from main config

# ===================================
# Cron Job Security
# ===================================

# Secret for authenticating cron job requests
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
CRON_SECRET=your_random_secret_here_min_64_chars_recommended

# ===================================
# Frontend Configuration
# ===================================

# Frontend URL for OAuth redirects
FRONTEND_URL=https://dannythehat.github.io/ranksmart
# Development: http://localhost:3000

# ===================================
# Notification Settings (Optional)
# ===================================

# Enable position change notifications
ENABLE_POSITION_ALERTS=true

# Notification threshold (minimum position change to trigger alert)
POSITION_ALERT_THRESHOLD=3

# Email notifications (uses existing SMTP settings)
ENABLE_EMAIL_NOTIFICATIONS=true

# Slack notifications (uses existing SLACK_WEBHOOK_URL)
ENABLE_SLACK_NOTIFICATIONS=false

# Discord notifications (uses existing DISCORD_WEBHOOK_URL)
ENABLE_DISCORD_NOTIFICATIONS=false

# ===================================
# Tracking Settings
# ===================================

# How often to check positions (cron schedule)
# Default: "0 2 * * *" (daily at 2 AM)
POSITION_CHECK_SCHEDULE=0 2 * * *

# Rate limiting between SERP checks (milliseconds)
SERP_CHECK_DELAY=2000

# Maximum articles to check per run
MAX_ARTICLES_PER_RUN=1000

# Timeout for SERP API requests (milliseconds)
SERP_API_TIMEOUT=15000

# ===================================
# Report Settings
# ===================================

# Default report date range (days)
DEFAULT_REPORT_DAYS=30

# Maximum report date range (days)
MAX_REPORT_DAYS=365

# Enable automatic weekly reports
ENABLE_AUTO_REPORTS=false

# Auto report schedule (cron)
AUTO_REPORT_SCHEDULE=0 9 * * 1

# ===================================
# Performance Settings
# ===================================

# Cache GSC data (seconds)
GSC_CACHE_TTL=3600

# Cache SERP results (seconds)
SERP_CACHE_TTL=86400

# Maximum position history to keep (days)
MAX_HISTORY_DAYS=365

# ===================================
# Cost Management
# ===================================

# SerpAPI cost per search (USD)
SERPAPI_COST_PER_SEARCH=0.002

# Google Custom Search cost per query (USD)
GOOGLE_SEARCH_COST_PER_QUERY=0.005

# Alert when daily cost exceeds (USD)
DAILY_COST_ALERT_THRESHOLD=5.00

# ===================================
# Development/Testing
# ===================================

# Mock SERP API responses (for testing without API calls)
MOCK_SERP_API=false

# Mock GSC API responses (for testing without GSC connection)
MOCK_GSC_API=false

# Enable verbose logging for analytics
DEBUG_ANALYTICS=false

# ===================================
# Setup Instructions
# ===================================

# 1. Google Cloud Console Setup:
#    - Create project at https://console.cloud.google.com
#    - Enable Google Search Console API
#    - Create OAuth 2.0 credentials
#    - Add authorized redirect URIs
#    - Copy Client ID and Secret
#
# 2. SerpAPI Setup (Optional):
#    - Sign up at https://serpapi.com
#    - Get API key from dashboard
#    - Add to SERPAPI_KEY
#
# 3. Generate Cron Secret:
#    - Run: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
#    - Add to CRON_SECRET
#
# 4. Deploy to Vercel:
#    - Add all variables to Vercel environment
#    - Deploy and test OAuth flow
#    - Verify cron job execution
#
# 5. Test:
#    - Connect GSC account
#    - Add test article to tracking
#    - Manually trigger cron job
#    - Verify position updates
#    - Generate test report

# ===================================
# Security Notes
# ===================================

# ‚ö†Ô∏è NEVER commit real values to Git
# ‚ö†Ô∏è Keep GOOGLE_CLIENT_SECRET secure
# ‚ö†Ô∏è Keep CRON_SECRET secure
# ‚ö†Ô∏è Use different secrets for dev/prod
# ‚ö†Ô∏è Rotate secrets regularly
# ‚ö†Ô∏è Monitor API usage and costs
# ‚ö†Ô∏è Enable rate limiting in production
# ‚ö†Ô∏è Use HTTPS for all OAuth redirects
